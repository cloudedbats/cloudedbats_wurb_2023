<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CloudedBats - WURB</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">

    <link rel="stylesheet" href="../static/css/wurb_slider.css">
    <link rel="stylesheet" href="{{ url_for('static', path='css/wurb_slider.css') }}">
    <!-- <script src="../static/js/ajax.js"></script> -->
</head>

<body>

    <div class="tile is-ancestor is-vertical m-0">
        <div class="tile is-parent">
            <article class="tile is-child box py-1">
                <div class="content is-large">

                    <div class="field">
                        <div class="container is-fluid">
                            <div class="is-pulled-right">
                                <button class="button is-rounded is-small has-text-weight-bold"
                                    onclick="annoToggleSettings()">
                                    <span id="anno-show-settings-text-id">Show settings</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <p class="title is-4">
                        Field annotations
                    </p>

                    <section id="anno-boddy-id" class="section has-background-grey-lighter p-2">

                        <div class="field">
                            <label class="label">Source&nbsp;folder&nbsp;/&nbsp;monitoring&nbsp;night</label>
                        </div>
                        <div class="field is-grouped">
                            <div class="control">
                                <div class="select is-rounded is-small has-text-weight-bold is-info">
                                    <select id="anno-select-source-id" onchange="annoSourceChanged()">
                                        <option value="select">Select:</option>
                                    </select>
                                </div>
                            </div>
                            <div class="control">
                                <div class="select is-rounded is-small has-text-weight-bold is-info">
                                    <select id="anno-select-night-id" onchange="annoNightChanged()">
                                        <option value="select">Select:</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- <div class="field pt---2">
                            <label class="label" id="anno-recording-short-info"></label>
                        </div> -->
                        <div class="field">
                            <!-- <label class="label">Select</label> -->
                            <div class="container is-fluid m-2">
                                <div class="buttons is-centered">
                                    <button id="anno-view-metadata-button-id" onclick="annoToggleViewMetadata()"
                                        class="button is-rounded is-small has-text-weight-bold is-info is-inverted">Data</button>
                                    <!-- <button id="anno-view-overview-button-id" onclick="annoToggleViewOverview()"
                                        class="button is-rounded is-small has-text-weight-bold is-info">Overview</button> -->
                                    <button id="anno-view-spectrogram-button-id" onclick="annoToggleViewSpectrogram()"
                                        class="button is-rounded is-small has-text-weight-bold is-info is---inverted">Spectrogram</button>
                                    <button id="anno-view-details-button-id" onclick="annoToggleViewDetails()"
                                        class="button is-rounded is-small has-text-weight-bold is-info"
                                        disabled>Details</button>
                                </div>
                            </div>
                        </div>

                        <div id="anno-view-metadata-id" class="field is---hidden">
                            <div class="control">
                                <div class="table-container mx-5 my--2 p-2">
                                    <table class="table has-background-white-ter is-striped is-size-7">
                                        <!-- <table
                                        class="table is-bordered is-striped is-narrow is-fullwidth is---hoverable is-size-7 py-2 px-4"
                                        style="display: block; height: 185px; overflow-y: scroll;"> -->
                                        <tbody>
                                            <!-- <tr>
                                                <th></th>
                                                <th colspan="4"></th>
                                                <td></td>
                                            </tr> -->
                                            <tr>
                                                <td class="has-text-right" style="white-space: nowrap;">File</td>
                                                <th colspan="3" style="white-space: nowrap;"><span  style="white-space: nowrap;" id="anno-metadata-record-file"></span></th>
                                            </tr>
                                            <tr>
                                                <td class="has-text-right" style="white-space: nowrap;">Quality</td>
                                                <th colspan="3" style="white-space: nowrap;"><span id="anno-metadata-quality"></span></th>
                                            </tr>
                                            <tr>
                                                <td class="has-text-right" style="white-space: nowrap;">Tags</td>
                                                <th colspan="3" style="white-space: nowrap;"><span id="anno-metadata-tags"></span></th>
                                            </tr>
                                            <tr>
                                                <td class="has-text-right" style="white-space: nowrap;">Comments</td>
                                                <th colspan="3" style="white-space: nowrap;"><span id="anno-metadata-comments"></span></th>
                                            </tr>
                                            <tr>
                                                <td class="has-text-right" style="white-space: nowrap;">Local date</td>
                                                <th colspan="1" style="white-space: nowrap;"><span id="anno-metadata-local-date"></span></th>
                                                <td class="has-text-right" style="white-space: nowrap;">Latitude</td>
                                                <th colspan="1" style="white-space: nowrap; width: 90%;"><span id="anno-metadata-latitude"></span></th>
                                                <!-- <td>Prefix</td>
                                                <th colspan="1"><span id="anno-metadata-prefix"></span></th> -->
                                            </tr>
                                            <!-- <tr>
                                                <th></th>
                                                <td>UTC</td>
                                                <th colspan="3"><span id="anno-metadata-datetime-utc"></span></th>
                                                <td></td>
                                            </tr> -->
                                            <tr>
                                                <td class="has-text-right" style="white-space: nowrap;">Local time</td>
                                                <th colspan="1" style="white-space: nowrap;"><span id="anno-metadata-local-time"></span></th>
                                                <td class="has-text-right" style="white-space: nowrap;">Longitude</td>
                                                <th colspan="1" style="white-space: nowrap; width: 90%;"><span id="anno-metadata-longitude"></span></th>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- <div id="anno-view-overview-id" class="field is-hidden">
                            <div class="control"> -->
                        <!-- <figure class="image is-16by9">
                                        <iframe class="has-ratio" width="640" height="360" src=""
                                            frameborder="0" allowfullscreen></iframe>
                                    </figure> -->
                        <!-- <figure class="image is--128x128">
                                    <img class="is--rounded" src="{{ url_for('static', path='PEAKS.png') }}">
                                </figure>
                            </div>
                        </div> -->

                        <div id="anno-view-spectrogram-id" class="field is-hidden">
                            <div class="control">
                                <!-- <figure class="image is-16by9">
                                        <iframe class="has-ratio" width="640" height="360" src=""
                                            frameborder="0" allowfullscreen></iframe>
                                    </figure> -->
                                <figure class="image is--128x128">
                                    <!-- <img class="" src="http://localhost:8001/annotations/spectrogram?sourceId=local&nightId=Taberg-1_2022-12-12&recordId=w53u384_20221213T085235"> -->
                                    <img id="anno-spectrogram-src-id" class=""
                                        src="{{ url_for('static', path='SPECTROGRAM.jpg') }}">
                                </figure>
                            </div>
                        </div>

                        <div id="anno-view-details-id" class="field is-hidden">
                            <div class="control has-background-success">
                                <figure class="image is-3by1">
                                    <iframe class="has-ratio" width="100" height="100" src="" frameborder="5"
                                        allowfullscreen>
                                    </iframe>
                                </figure>
                            </div>
                        </div>

                        <div class="container">
                            <div class="buttons is-centered">
                                <button id="anno-first-id" onclick="annoFirst()"
                                    class="button is-rounded is-small has-text-weight-bold is-info">First</button>
                                <button id="anno-previous-id" onclick="annoPrevious()"
                                    class="button is-rounded is-small has-text-weight-bold is-info">Previous</button>
                                <button id="anno-next-id" onclick="annoNext()"
                                    class="button is-rounded is-small has-text-weight-bold is-info">Next</button>
                                <button id="anno-last-id" onclick="annoLast()"
                                    class="button is-rounded is-small has-text-weight-bold is-info">Last</button>
                            </div>
                        </div>

                        <div class="field pt-2">
                            <div class="label">
                                <label class="label">
                                    Quality, tags and comments
                                    <span id="anno-recording-short-info"></span>
                                </label>
                            </div>
                        </div>

                        <div class="field">
                            <div class="content">
                                <div class="container">
                                    <div class="control has-text-weight-bold">
                                        <label class="radio">
                                            <input id="anno-q0-id" type="radio" name="quality" onchange="annoSetQ0()">
                                            Q0 (trash)
                                        </label>
                                        <label class="radio">
                                            <input id="anno-q1-id" type="radio" name="quality" onchange="annoSetQ1()">
                                            Q1 (red)
                                        </label>
                                        <label class="radio">
                                            <input id="anno-q2-id" type="radio" name="quality" onchange="annoSetQ2()">
                                            Q2 (yellow)
                                        </label>
                                        <label class="radio">
                                            <input id="anno-q3-id" type="radio" name="quality" onchange="annoSetQ3()">
                                            Q3 (green)
                                        </label>
                                        <label class="radio">
                                            <input id="anno-not-assigned-id" type="radio" name="quality"
                                                onchange="annoSetQNotAssigned()">
                                            Not assigned
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- <div class="field">
                            <div class="label">
                                <label class="label">Select tags (white are selected)</label>
                            </div>
                        </div> -->

                        <div class="container pb-4 ml-0">
                            <div class="buttons">
                                <button id="anno-FM-CF-FM-id" onclick="toggleTag(this)"
                                    class="button is-rounded is-small has-text-weight-bold is-info">FM-CF-FM</button>
                                <button id="anno-FM-id" onclick="toggleTag(this)"
                                    class="button is-rounded is-small has-text-weight-bold is-info">FM</button>
                                <button id="anno-FM-QCF-id" onclick="toggleTag(this)"
                                    class="button is-rounded is-small has-text-weight-bold is-info">FM-QCF</button>
                                <button id="anno-QCF-id" onclick="toggleTag(this)"
                                    class="button is-rounded is-small has-text-weight-bold is-info">QCF</button>
                                <button id="anno-FM+H2-id" onclick="toggleTag(this)"
                                    class="button is-rounded is-small has-text-weight-bold is-info">FM+H2</button>
                                <button id="anno-QCF+FM-id" onclick="toggleTag(this)"
                                    class="button is-rounded is-small has-text-weight-bold is-info">QCF+FM</button>

                            </div>
                        </div>

                        <!-- <div class="container pb-4 ml-0">
                            <div class="buttons">
                                <button id="anno-XXX-id" onclick="toggleTag(this)"
                                    class="button is-rounded is-small has-text-weight-bold is-info">FMd-QCF</button>
                                <button id="anno-XXX-id" onclick="toggleTag(this)"
                                    class="button is-rounded is-small has-text-weight-bold is-info">FMu-QCF</button>
                                <button id="anno-XXX-id" onclick="toggleTag(this)"
                                    class="button is-rounded is-small has-text-weight-bold is-info">QCF-FMd</button>
                                <button id="anno-XXX-id" onclick="toggleTag(this)"
                                    class="button is-rounded is-small has-text-weight-bold is-info">CF-FMd</button>
                                <button id="anno-XXX-id" onclick="toggleTag(this)"
                                    class="button is-rounded is-small has-text-weight-bold is-info">FMu-QCF-FMd</button>
                                <button id="anno-XXX-id" onclick="XXXtoggleTag(this)XX()"
                                    class="button is-rounded is-small has-text-weight-bold is-info">FMu-CF-FMd</button>
                                <button id="anno-XXX-id" onclick="toggleTag(this)"
                                    class="button is-rounded is-small has-text-weight-bold is-info">FMd</button>
                                <button id="anno-XXX-id" onclick="toggleTag(this)"
                                    class="button is-rounded is-small has-text-weight-bold is-info">CF-FMd-CF</button>
                            </div>
                        </div> -->

                        <div class="container pb-4 ml-0">
                            <div class="buttons">
                                <button id="anno-Social-id" onclick="toggleTag(this)"
                                    class="button is-rounded is-small has-text-weight-bold is-info">Social</button>
                                <button id="anno-Birds-id" onclick="toggleTag(this)"
                                    class="button is-rounded is-small has-text-weight-bold is-info">Birds</button>
                                <button id="anno-Mammals-id" onclick="toggleTag(this)"
                                    class="button is-rounded is-small has-text-weight-bold is-info">Mammals</button>
                                <button id="anno-Crickets-id" onclick="toggleTag(this)"
                                    class="button is-rounded is-small has-text-weight-bold is-info">Crickets</button>
                            </div>
                        </div>

                        <!-- <div class="field">
                            <label class="label">Comments</label>
                        </div> -->
                        <div class="field">
                            <p class="control">
                                <input class="input" type="text" id="anno-comments-id"
                                    placeholder="Comments on recording" onchange="annoSaveAnnotations();">
                            </p>
                        </div>

                        <!-- <div class="field">
                            <label class="label">Commands</label>
                        </div> -->
                        <div class="container">
                            <div class="buttons is-centered">
                                <button id="anno-clear-id" onclick="annoQuickClear()"
                                    class="button is-rounded is-small has-text-weight-bold is-info">Clear</button>
                                <button id="anno-copy-id" onclick="annoQuickCopy()"
                                    class="button is-rounded is-small has-text-weight-bold is-info">Copy</button>
                                <button id="anno-paste-id" onclick="annoQuickPaste()"
                                    class="button is-rounded is-small has-text-weight-bold is-info"
                                    disabled>Paste</button>
                                <button id="anno-paste-next-id" onclick="annoQuickPasteNext()"
                                    class="button is-rounded is-small has-text-weight-bold is-info"
                                    disabled>Paste+next</button>
                                <!-- <button id="anno-download-id" onclick="annoQuickDownload()"
                                    class="button is-rounded is-small has-text-weight-bold is-info"
                                    disabled>Download</button> -->
                                <a id="anno-download-id" onclick="annoQuickDownload()"
                                    class="button is-rounded is-small has-text-weight-bold is-info" href=""
                                    download>Download</a>

                            </div>
                        </div>
                    </section>

                    <section id="anno-settings-id" class="section p-2 has-background-grey-light is-hidden">
                        <div class="field">
                            <div class="container is-fluid">
                                <div class="is-pulled-right">
                                    <button class="delete is-large m-2" onclick="annoToggleSettings()"></button>
                                </div>
                            </div>
                        </div>
                        <div class="field">
                            <label class="title is-4">Settings</label>
                        </div>

                        <div class="field">
                            <label class="label">Filter&nbsp;on&nbsp;quality</label>
                        </div>

                        <div class="field">
                            <div class="content">
                                <div class="container">
                                    <div class="control has-text-weight-bold">
                                        <label class="checkbox">
                                            <input id="anno-filter-q0-id" class="mr-1" type="checkbox"
                                                onchange="XXXXX()" checked>Q0
                                        </label>
                                        <label class="checkbox">
                                            <input id="anno-filter-q1-id" class="mx-1" type="checkbox"
                                                onchange="XXXXX()" checked>Q1
                                        </label>
                                        <label class="checkbox">
                                            <input id="anno-filter-q2-id" class="mx-1" type="checkbox"
                                                onchange="XXXXX()" checked>Q2
                                        </label>
                                        <label class="checkbox">
                                            <input id="anno-filter-q3-id" class="mx-1" type="checkbox"
                                                onchange="XXXXX()" checked>Q3
                                        </label>
                                        <label class="checkbox">
                                            <input id="anno-filter-not-assigned-id" class="mx-1" type="checkbox"
                                                onchange="XXXXX()" checked>Not assigned
                                        </label>
                                        <button id="anno-filter-clear-all" onclick="annoClearFilter()"
                                            class="button is-rounded is-small has-text-weight-bold is-info mx-1">
                                            Clear
                                        </button>
                                        <button id="anno-filter-set-all" onclick="annoSetFilter()"
                                            class="button is-rounded is-small has-text-weight-bold is-info mx-1">
                                            Mark all
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="field pt-2">
                            <label class="label">Quick keys (can't be changed)</label>
                        </div>
                        <div class="table-container">
                            <table class="table is-bordered is-striped is-narrow is-hoverable is-size-6">
                                <thead>
                                    <tr>
                                        <th>Quick key</th>
                                        <th>Action</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>shift+x</td>
                                        <td>Q0</td>
                                        <td>Set quality Q0 (trash).</td>
                                    </tr>
                                    <tr>
                                        <td>shift+0</td>
                                        <td>Q0</td>
                                        <td>Set quality Q0 (trash).</td>
                                    </tr>
                                    <tr>
                                        <td>shift+1</td>
                                        <td>Q1</td>
                                        <td>Set quality Q1 (red).</td>
                                    </tr>
                                    <tr>
                                        <td>shift+2</td>
                                        <td>Q2</td>
                                        <td>Set quality Q2 (yellow).</td>
                                    </tr>
                                    <tr>
                                        <td>shift+3</td>
                                        <td>Q3</td>
                                        <td>Set quality Q3 (green).</td>
                                    </tr>
                                    <tr>
                                        <td>shift+left</td>
                                        <td>Previous</td>
                                        <td>Go to previous recording.</td>
                                    </tr>
                                    <tr>
                                        <td>shift+right</td>
                                        <td>Next</td>
                                        <td>Go to next recording.</td>
                                    </tr>
                                    <tr>
                                        <td>shift+q</td>
                                        <td>Clear</td>
                                        <td>Clear quality, tags and comments.</td>
                                    </tr>
                                    <tr>
                                        <td>shift+c</td>
                                        <td>Copy</td>
                                        <td>Copy quality, tags and comments.</td>
                                    </tr>
                                    <tr>
                                        <td>shift+up</td>
                                        <td>Copy</td>
                                        <td>Copy quality, tags and comments.</td>
                                    </tr>
                                    <tr>
                                        <td>shift+v</td>
                                        <td>Paste</td>
                                        <td>Paste quality, tags and comments.</td>
                                    </tr>
                                    <tr>
                                        <td>shift+down</td>
                                        <td>Paste</td>
                                        <td>Paste quality, tags and comments.</td>
                                    </tr>
                                    <tr>
                                        <td>shift+enter</td>
                                        <td>Paste and next</td>
                                        <td>Paste quality, tags and comments. Go to next recording.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </section>

                </div>
            </article>
        </div>
    </div>

</body>

</html>